<mxGraphModel dx="1422" dy="744" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1100" pageHeight="850" math="0" shadow="0" extFonts="Long Cang^https://fonts.googleapis.com/css?family=Long+Cang|Ma Shan Zheng^https://fonts.googleapis.com/css?family=Ma+Shan+Zheng"><root><mxCell id="0"/><mxCell id="1" parent="0"/><mxCell id="WX1Tnzk67ku8kGiLb7Gt-1" value="&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;Broker&lt;/b&gt;&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;sketch=1;fillColor=none;" vertex="1" parent="1"><mxGeometry x="760" y="60" width="120" height="60" as="geometry"/></mxCell><mxCell id="WX1Tnzk67ku8kGiLb7Gt-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="WX1Tnzk67ku8kGiLb7Gt-2" target="WX1Tnzk67ku8kGiLb7Gt-3"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="WX1Tnzk67ku8kGiLb7Gt-13" value="&lt;font face=&quot;Comic Sans MS&quot;&gt;Binding&lt;/font&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="WX1Tnzk67ku8kGiLb7Gt-12"><mxGeometry x="-0.25" y="1" relative="1" as="geometry"><mxPoint x="-1" y="10" as="offset"/></mxGeometry></mxCell><mxCell id="WX1Tnzk67ku8kGiLb7Gt-2" value="&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;Exchange&lt;/b&gt;&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;sketch=1;fillColor=none;" vertex="1" parent="1"><mxGeometry x="440" y="220" width="120" height="60" as="geometry"/></mxCell><mxCell id="WX1Tnzk67ku8kGiLb7Gt-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;sketch=1;" edge="1" parent="1" source="WX1Tnzk67ku8kGiLb7Gt-3" target="WX1Tnzk67ku8kGiLb7Gt-5"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="WX1Tnzk67ku8kGiLb7Gt-11" value="监听队列，拉取消息" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="WX1Tnzk67ku8kGiLb7Gt-8"><mxGeometry x="-0.21" y="-1" relative="1" as="geometry"><mxPoint x="21" y="-1" as="offset"/></mxGeometry></mxCell><mxCell id="WX1Tnzk67ku8kGiLb7Gt-3" value="&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;Queue&lt;/b&gt;&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;sketch=1;fillColor=none;" vertex="1" parent="1"><mxGeometry x="440" y="360" width="120" height="60" as="geometry"/></mxCell><mxCell id="WX1Tnzk67ku8kGiLb7Gt-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="WX1Tnzk67ku8kGiLb7Gt-4" target="WX1Tnzk67ku8kGiLb7Gt-2"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="WX1Tnzk67ku8kGiLb7Gt-10" value="创建Connection,打开Channel" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="WX1Tnzk67ku8kGiLb7Gt-9"><mxGeometry x="-0.14" relative="1" as="geometry"><mxPoint x="14" as="offset"/></mxGeometry></mxCell><mxCell id="WX1Tnzk67ku8kGiLb7Gt-4" value="&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;Producer&lt;/b&gt;&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;sketch=1;fillColor=none;" vertex="1" parent="1"><mxGeometry x="120" y="220" width="120" height="60" as="geometry"/></mxCell><mxCell id="WX1Tnzk67ku8kGiLb7Gt-5" value="&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;Consumer&lt;/b&gt;&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;sketch=1;fillColor=none;" vertex="1" parent="1"><mxGeometry x="120" y="360" width="120" height="60" as="geometry"/></mxCell><mxCell id="WX1Tnzk67ku8kGiLb7Gt-6" value="&lt;p style=&quot;line-height: 160%&quot;&gt;&lt;b&gt;消费队列交换机&lt;/b&gt;&lt;br&gt;按照一定的规则将消息路由转发到某个队列&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;sketch=1;" vertex="1" parent="1"><mxGeometry x="560" y="220" width="130" height="60" as="geometry"/></mxCell><mxCell id="WX1Tnzk67ku8kGiLb7Gt-7" value="&lt;p style=&quot;line-height: 160%&quot;&gt;&lt;b&gt;消息队列&lt;/b&gt;&lt;br&gt;存储消息的队列&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;sketch=1;" vertex="1" parent="1"><mxGeometry x="560" y="360" width="120" height="60" as="geometry"/></mxCell><mxCell id="WX1Tnzk67ku8kGiLb7Gt-14" value="&lt;p style=&quot;line-height: 160%&quot;&gt;&lt;b&gt;消息队列服务进程&lt;/b&gt;&lt;br&gt;包含Exchange和Queue&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;sketch=1;" vertex="1" parent="1"><mxGeometry x="880" y="60" width="130" height="60" as="geometry"/></mxCell><mxCell id="WX1Tnzk67ku8kGiLb7Gt-16" value="&lt;ul style=&quot;line-height: 150%&quot;&gt;&lt;li&gt;生产者连接到 Broker，创建 connection，打开 Channel&lt;/li&gt;&lt;li&gt;生产者声明交换机类型，名称，是否持久化等。&lt;/li&gt;&lt;li&gt;生产者发送消息，并指定消息是否持久化等属性和 routing key&lt;/li&gt;&lt;li&gt;exchage 收到消息后，根据 routing key 路由到跟当前交换机绑定的相匹配的队列里&lt;/li&gt;&lt;li&gt;消费者监听接收到消息之后开始处理业务&lt;/li&gt;&lt;/ul&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;sketch=1;" vertex="1" parent="1"><mxGeometry x="110" y="450" width="490" height="100" as="geometry"/></mxCell><mxCell id="WX1Tnzk67ku8kGiLb7Gt-17" value="&lt;div&gt;Exchange 的四种类型：&lt;/div&gt;直连交换机（Direct Exchange&lt;span&gt;）&lt;br&gt;&lt;/span&gt;发布订阅（Fanout Exchange）&lt;br&gt;主题交换机（Topic Exchange）&lt;br&gt;头匹配交换机（Headers Exchange）&lt;br&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;sketch=1;" vertex="1" parent="1"><mxGeometry x="760" y="200" width="490" height="100" as="geometry"/></mxCell><mxCell id="WX1Tnzk67ku8kGiLb7Gt-18" value="&lt;p style=&quot;line-height: 160%&quot;&gt;一个Excehange可以把绑定多个Queue&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;sketch=1;" vertex="1" parent="1"><mxGeometry x="520" y="300" width="230" height="30" as="geometry"/></mxCell></root></mxGraphModel>